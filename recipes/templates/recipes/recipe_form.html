{% extends 'base.html' %}

{% block title %}{% if recipe %}Edit{% else %}Add{% endif %} Recipe - Retetar Online{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12 col-lg-10 col-xl-8 mx-auto">
        <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-3 mb-md-4 gap-2">
            <h1 class="h2 h1-md mb-0">{% if recipe %}Edit Recipe{% else %}Add New Recipe{% endif %}</h1>
            <a href="{% url 'recipes:recipe_list' %}" class="btn btn-outline-secondary">
                ‚Üê Back
            </a>
        </div>

        <div class="card shadow-sm">
            <div class="card-body">
                <form method="post">
                    {% csrf_token %}
                    
                    <!-- Title -->
                    <div class="mb-3">
                        <label for="title" class="form-label">Recipe Title *</label>
                        <input 
                            type="text" 
                            class="form-control" 
                            id="title" 
                            name="title" 
                            value="{% if recipe %}{{ recipe.title }}{% endif %}"
                            required
                            placeholder="e.g., Spaghetti Carbonara">
                    </div>

                    <!-- Category -->
                    <div class="mb-3">
                        <label for="category" class="form-label">Category *</label>
                        <input 
                            type="text" 
                            class="form-control" 
                            id="category" 
                            name="category" 
                            value="{% if recipe %}{{ recipe.category }}{% endif %}"
                            required
                            placeholder="e.g., Italian, Dessert, Breakfast"
                            list="categoryList">
                        <datalist id="categoryList">
                            {% for cat in categories %}
                                <option value="{{ cat }}">
                            {% endfor %}
                        </datalist>
                        <small class="form-text text-muted">Type a category or choose from existing ones</small>
                    </div>

                    <!-- Ingredients -->
                    <div class="mb-3">
                        <label for="ingredients" class="form-label">Ingredients *</label>
                        <textarea 
                            class="form-control" 
                            id="ingredients" 
                            name="ingredients" 
                            rows="6"
                            required
                            placeholder="List ingredients, one per line:&#10;- 400g spaghetti&#10;- 200g pancetta&#10;- 4 eggs&#10;- 100g Parmesan cheese">{% if recipe %}{{ recipe.ingredients }}{% endif %}</textarea>
                    </div>

                    <!-- Instructions -->
                    <div class="mb-3">
                        <label for="instructions" class="form-label">Instructions *</label>
                        <textarea 
                            class="form-control" 
                            id="instructions" 
                            name="instructions" 
                            rows="8"
                            required
                            placeholder="Write step-by-step instructions:&#10;1. Boil water and cook spaghetti&#10;2. Fry pancetta until crispy&#10;3. Mix eggs with grated Parmesan...">{% if recipe %}{{ recipe.instructions }}{% endif %}</textarea>
                    </div>

                    <!-- Buttons -->
                    <div class="d-grid gap-2 d-md-flex">
                        <button type="submit" class="btn btn-success btn-lg flex-md-grow-1">
                            {% if recipe %}üíæ Save{% else %}‚ûï Create{% endif %}
                        </button>
                        <a href="{% url 'recipes:recipe_list' %}" class="btn btn-secondary btn-lg flex-md-grow-1">
                            Cancel
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
